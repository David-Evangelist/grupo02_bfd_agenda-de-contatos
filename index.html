<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
            const contatos = [];

let nomeContato = "";
let telefoneContato = "";
let emailContato = "";
 

do {
    // Menu interativo
  var menuInterativo = Number(
    prompt(
      "    >>> MENU <<<\n 1- Cadastrar contato\n 2- Listar contatos\n 3- Buscar contato\n 4- Atualizar contato\n 5- Remover contato\n 0- Sair do Menu\n ESCOLHA UMA OPÇÃO:"
    )
  );

  switch (menuInterativo) {
    case 1:
      cadastrarContato();
      break;
    case 2:
      listarContatos();
      break;
    case 3:
      buscarContato();
      break;
    case 4:
      atualizarContato();
      break;
    case 5:
      removerContato();
      break;
    case 0:
      alert ("Saindo do menu...");
      break;
    default:
      alert("Valor inválido! Tente novamente.");
      break;
  }
} while (menuInterativo !== 0);

// <<< FUNÇÕES >>>

// Cadastra um novo contato
function cadastrarContato() {
nomeContato = prompt("Digite seu nome completo: ");
telefoneContato = prompt("Digite seu número de telefone com DDD: ");
emailContato = prompt("Digite o seu email: ");

if (nomeContato && telefoneContato && emailContato) {
    if (emailContato.includes("@") && emailContato.includes(".com")) {
      if(telefoneContato.length === 11) {
        for (let i = 0; i < contatos.length; i++) {
            if (contatos[i][1] === telefoneContato || contatos[i][2] === emailContato) {
                return alert("Contato já cadastrado!");
            }
        }
        contatos.push([nomeContato, telefoneContato, emailContato]);
        return alert("Cadastro realizado com sucesso!");
      } else {
        return alert("Telefone inválido! Tente novamente.");
      }        
    } else {
        return alert("Email inválido! Tente novamente.");
    }
} else {
    return alert("Por favor, preencha todos os campos para cadastrar o contato.");
}
}

// Lista todos os contatos já salvos
function listarContatos() {
  if (contatos.length === 0) {
    alert("Nenhum contato cadastrado!");
  }
 if (contatos.length != null) {
  for (let i = 0; i < contatos.length; i++) {   
      alert(`>> Contato ${i + 1}\n Nome: ${contatos[i][0]}\n Telefone: ${contatos[i][1]}\n Email: ${contatos[i][2]}\n -------`);
    }
  }
}


// Retorna o contato buscado pelo email
function buscarContato() {
  let emailBusca = prompt("Digite o email do contato que deseja buscar: ");
  let encontrado = false;

  for (let i = 0; i < contatos.length; i++) {
    if (contatos[i][2].toLowerCase() === emailBusca.toLowerCase()) {
      return alert(
        `Contato encontrado no índice ${i}: \n Nome: ${contatos[i][0]}\n Telefone: ${contatos[i][1]}\n Email: ${contatos[i][2]}`
       );
    }
  } 
      return alert("Nenhum contato encontrado com esse nome!");
}

// Atualiza um valor do contato buscado pelo email
// Falta modificações
function atualizarContato() {
   alert("Atualize seu contato");
    let nomeBusca= prompt("Digite o email do contato que queria atualizar");
    let encontrado = false

    for(let i = 0 ; i <contatos.length;i++) {
    if(contatos[i][0] === nomeBusca){
    let novoTelefone = prompt("Digite seu novo telefone:");
    let novoEmail = prompt("Digite seu novo email:");

    contatos[i][1] = novoTelefone;
    contatos[i][2] = novoEmail;

    console.log("Contato atualizado com sucesso:");
    console.log(`nome: ${contatos[i][0]}`);
    console.log(`telefone: ${contatos[i][1]}`);
    console.log(`email: ${contatos[i][2]}`);
    encontrado = true;
    break;
    }
  }
}

// Remove o contato buscado pelo email
function removerContato() {
  let removerContato = prompt('Digite o email do contato para ser removido da lista: ');
  let encontrado = false;

  for (let i = 0; i < contatos.length; i++) {
    if (contatos[i][2].toUpperCase() === removerContato.toUpperCase()) {
      contatos.splice(i, 1);
      alert(`${removerContato} foi removido da lista.`);
      encontrado = true;
      break; 
    }
  }

  if (!encontrado) {
    alert(`Email do contato: ${removerContato} não encontrado na lista.`);
  }

  alert("Lista atualizada de contatos:");
  listarContatos();
}      
    </script>
</body>
</html>
